@model List<Cholo_Sikhi.Models.Quiz>
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Quizport</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="~/Content/quizstyle.css">
</head>
<body>

    @{List<String> parts = new List<String>(); }

    <div>


        @for (int i = 0; i < Model.Count; i++)
        {
            <div class="quiz">
                <div class="quiz-title">
                    <label>@(i+1). @Model[i].question</label>
                </div>

                <br />

                <div class="options">
                    <div class="form-check">
                        <input class="form-check-input custom+@i" onclick="answerOnClick(@i,'@Model[i].o1')" type="radio" name="flexRadioDefault+@i" value="@Model[i].o1">
                        <label class="form-check-label" id="question+@i+@Model[i].o1" for="A">@Model[i].o1</label>
                        <br>
                        <input class="form-check-input custom+@i" onclick="answerOnClick(@i,'@Model[i].o2')" type="radio" name="flexRadioDefault+@i" value="@Model[i].o2">
                        <label class="form-check-label" id="question+@i+@Model[i].o2" for="B">@Model[i].o2</label>
                        <br>
                        <input class="form-check-input custom+@i" onclick="answerOnClick(@i,'@Model[i].o3')" type="radio" name="flexRadioDefault+@i" value="@Model[i].o3">
                        <label class="form-check-label" id="question+@i+@Model[i].o3" for="C">@Model[i].o3</label>
                        <br />
                        <input class="form-check-input custom+@i" onclick="answerOnClick(@i,'@Model[i].o4')" type="radio" name="flexRadioDefault+@i" value="@Model[i].o4">
                        <label class="form-check-label" id="question+@i+@Model[i].o4" for="D">@Model[i].o4</label>
                    </div>
                </div>
            </div>

        }
      
    </div>

    <form method="post" id="contactForm" name="contactForm">
        <input type="text" class="form-control" name="result" id="eame" placeholder="Result">

        <input type="submit" />
    </form>

    <div class="form-group row">
        <div class="col-4 offset-4">
            <button id="completeBtn" onclick="CompleteQuiz(@Model.Count)" class="btn btn-info form-control">Complete the Quiz</button>
        </div>
    </div>

    <div id="showresult" style="visibility:hidden">
        <p>Your Total marks is : <span id="resultt"></span></p>
    </div>

    <div style="visibility:hidden">
        @for (int i = 0; i < Model.Count; i++)
        {
            <input value="@Model[i].answer" id="correct+@i" />
        }
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <script>

        const given = [];
        var result = 0;
        function answerOnClick(questionIndex, answer) {
            var redval = answer;
            given[questionIndex] = redval;
        }

        function CompleteQuiz(count) {


            //document.getElementById('result').innerHTML = given[0] + ' ' + document.getElementById('correct+' + 0).value;
            //document.getElementById('result2').innerHTML = given[1] + ' ' + document.getElementById('correct+' + 1).value;
            for (var i = 0; i < count; i++) {
                var correctAnswer = document.getElementById('correct+' + i).value;
                var givenAnswer = given[i];

                if (correctAnswer == givenAnswer) {
                    document.getElementById("question+" + i + '+' + givenAnswer).classList.add("btn-success");
                    result++;
                    // document.getElementById('result').innerHTML = givenAnswer + ' ' + correctAnswer;
                }
                else {
                    document.getElementById("question+" + i + '+' + givenAnswer).classList.add("btn-danger");
                    document.getElementById("question+" + i + '+' + correctAnswer).classList.add("btn-success");
                }
            }

            document.getElementById("showresult").style.visibility = "visible";
            document.getElementById("resultt").innerHTML = result;
            document.getElementById("completeBtn").style.visibility = "hidden";
            document.querySelector('.form-control').value = result;
            //document.getElementById('contactForm').submit();

        }
    </script>
</body>
</html>
